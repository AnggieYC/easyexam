{"remainingRequest":"/home/anggie/easy-exam-grupo-ii/Implementation/frontend/easyexam/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/anggie/easy-exam-grupo-ii/Implementation/frontend/easyexam/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/anggie/easy-exam-grupo-ii/Implementation/frontend/easyexam/src/views/Login.vue","mtime":1574864847674},{"path":"/home/anggie/easy-exam-grupo-ii/Implementation/frontend/easyexam/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/anggie/easy-exam-grupo-ii/Implementation/frontend/easyexam/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/anggie/easy-exam-grupo-ii/Implementation/frontend/easyexam/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/anggie/easy-exam-grupo-ii/Implementation/frontend/easyexam/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICd2dWV4JwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdsb2dpbicsCiAgY29tcG9uZW50czogewogIH0sCiAgZGF0YSgpewogICAgICByZXR1cm4gewogICAgICAgICAgZW1haWw6JycsCiAgICAgICAgICBwYXNzd29yZDogJycsCiAgICAgICAgICBzdWJtaXR0ZWQ6IGZhbHNlLAogICAgICAgICAgZGlzbWlzc1NlY3M6IDUsCiAgICAgICAgICBkaXNtaXNzQ291bnREb3duOiAwLAogICAgICB9CiAgfSwKICBjb21wdXRlZDp7CiAgICAuLi5tYXBTdGF0ZSAoewogICAgICAgICAgICB1c2VybmFtZTogc3RhdGUgPT4gc3RhdGUudXNlci51c2VybmFtZSwKICAgICAgICAgICAgdG9rZW46IHN0YXRlID0+IHN0YXRlLnVzZXIudG9rZW4KICAgICAgICB9KQogIH0sCiAgICBtZXRob2RzOnsKICAgICAgc2VuZHBvc3QoKSB7CiAgICAgICAgICB0aGlzLnN1Ym1pdHRlZCA9IHRydWU7CiAgICAgICAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gdGhpczsKICAgICAgICAgIAogICAgICAgICAgaWYgKGVtYWlsICYmIHBhc3N3b3JkKSB7CiAgICAgICAgICAgICAgYXhpb3MucG9zdCgnaHR0cDovLycrIHRoaXMuJHN0b3JlLnN0YXRlLmNsaWVudFVSTCArICcvYXBpL3YxL2xvZ2luJywgewogICAgICAgICAgICAgICAgZW1haWw6IGVtYWlsLAogICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT0gInN1Y2Nlc3MiKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUudXNlci51c2VybmFtZSA9IHJlc3BvbnNlLmRhdGEucmVzdWx0LnVzZXJuYW1lCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUudXNlci50b2tlbiA9IHJlc3BvbnNlLmRhdGEucmVzdWx0LnRva2VuCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUudXNlci5jcmVkaXRzID0gcmVzcG9uc2UuZGF0YS5yZXN1bHQuY3JlZGl0cwogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuaWQgPSByZXNwb25zZS5kYXRhLnJlc3VsdC5pZAogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIucm9sZS5pZCA9IHJlc3BvbnNlLmRhdGEucmVzdWx0LnJvbGUuaWQKICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLnJvbGUubmFtZSA9IHJlc3BvbnNlLmRhdGEucmVzdWx0LnJvbGUubmFtZQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmlzTG9nZ2VkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2Rhc2hib2FyZCcpCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc2Vzc2lvbi5zZXQoJ3VzZXInLCB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLnVzZXJuYW1lKQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHNlc3Npb24uc2V0KCd0b2tlbicsIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIudG9rZW4gKQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHNlc3Npb24uc2V0KCdpc0xvZ2dlZCcsIHRoaXMuJHN0b3JlLnN0YXRlLmlzTG9nZ2VkKQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHNlc3Npb24uc2V0KCd1c2VyX2lkJyx0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmlkICkKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNtaXNzQ291bnREb3duID0gdGhpcy5kaXNtaXNzU2VjcwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBlcnJvciA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgICAgICB0aGlzLmRpc21pc3NDb3VudERvd24gPSB0aGlzLmRpc21pc3NTZWNzCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgIH0sCiAgICAgIGNvdW50RG93bkNoYW5nZWQoZGlzbWlzc0NvdW50RG93bikgewogICAgICAgIHRoaXMuZGlzbWlzc0NvdW50RG93biA9IGRpc21pc3NDb3VudERvd24KICAgICAgfQogICAgfSwKfQo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div id=\"login\">\n    <div class=\"cotainer m-4\">\n        <div class=\"row justify-content-center\">\n            <div class=\"col-md-5\">\n                <div class=\"card\">\n                    <header class=\"card-header\">\n                        <a href=\"/register\" class=\"float-right btn btn-outline-primary mt-1\">Sign Up</a>\n                        <h4 class=\"card-title mt-2\">Login</h4>\n                    </header>\n                    <article class=\"card-body\">\n                          <b-alert\n                            :show=\"dismissCountDown\"\n                            dismissible\n                            variant=\"danger\"\n                            @dismissed=\"dismissCountDown=0\"\n                            @dismiss-count-down=\"countDownChanged\"\n                            >\n                            Email or password incorrect\n                            </b-alert>\n\n                        <form @submit.prevent=\"sendpost\">\n                            <div class=\"form-group\">\n                                <label for=\"email\">Email</label>\n                                <input type=\"email\" v-model=\"email\" name=\"email\" class=\"form-control\" :class=\"{ 'is-invalid': submitted && !email }\" />\n                                <div v-show=\"submitted && !email\" class=\"invalid-feedback\">Email is required</div>\n                            </div>\n                            <div class=\"form-group\">\n                                <label htmlFor=\"password\">Password</label>\n                                <input type=\"password\" v-model=\"password\" name=\"password\" class=\"form-control\" :class=\"{ 'is-invalid': submitted && !password }\" />\n                                <div v-show=\"submitted && !password\" class=\"invalid-feedback\">Password is required</div>\n                            </div>\n                            <div class=\"form-row justify-content-center\">\n                                <label>\n                                    <input type=\"checkbox\" name=\"remember\">  Remember Me\n                                </label>\n                            </div>\n                            <div class=\"form-row justify-content-center\">\n                                <a href=\"/forgot-password\" class=\"btn btn-link\"> Forgot Your Password?</a>\n                            </div>\n                            <p></p>\n\n                            <div class=\"form-group\">\n                                <button type=\"submit\" class=\"btn btn-primary btn-block\">\n                                    Login\n                                </button>\n                            </div>\n\n                        </form>\n                    </article>\n                    <div class=\"border-top card-body text-center\">Don't have an account? <a href=\"/register\">Sign up</a></div>\n                </div>\n            </div>\n        </div>\n    </div>\n    </div>\n</template>\n\n\n<script>\nimport axios from 'axios'\nimport { mapState } from 'vuex'\n\nexport default {\n  name: 'login',\n  components: {\n  },\n  data(){\n      return {\n          email:'',\n          password: '',\n          submitted: false,\n          dismissSecs: 5,\n          dismissCountDown: 0,\n      }\n  },\n  computed:{\n    ...mapState ({\n            username: state => state.user.username,\n            token: state => state.user.token\n        })\n  },\n    methods:{\n      sendpost() {\n          this.submitted = true;\n          const { email, password } = this;\n          \n          if (email && password) {\n              axios.post('http://'+ this.$store.state.clientURL + '/api/v1/login', {\n                email: email,\n                password: password\n            })\n            .then(response => {\n                if (response.data.message == \"success\") {\n                    this.$store.state.user.username = response.data.result.username\n                    this.$store.state.user.token = response.data.result.token\n                    this.$store.state.user.credits = response.data.result.credits\n                    this.$store.state.user.id = response.data.result.id\n                    this.$store.state.user.role.id = response.data.result.role.id\n                    this.$store.state.user.role.name = response.data.result.role.name\n                    this.$store.state.isLogged = true;\n                    this.$router.push('/dashboard')\n                    this.$session.set('user', this.$store.state.user.username)\n                    this.$session.set('token', this.$store.state.user.token )\n                    this.$session.set('isLogged', this.$store.state.isLogged)\n                    this.$session.set('user_id',this.$store.state.user.id )\n                } else {\n                    this.dismissCountDown = this.dismissSecs\n                }\n            }, error => {\n                console.log(error);\n                this.dismissCountDown = this.dismissSecs\n            })\n          }\n      },\n      countDownChanged(dismissCountDown) {\n        this.dismissCountDown = dismissCountDown\n      }\n    },\n}\n</script>\n\n<style scoped>\n\n.my-form\n{\n    padding-top: 1.5rem;\n    padding-bottom: 1.5rem;\n}\n\n.my-form .row\n{\n    margin-left: 0;\n    margin-right: 0;\n}\n\n.login-form\n{\n    padding-top: 1.5rem;\n    padding-bottom: 1.5rem;\n}\n</style>\n"]}]}